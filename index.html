<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8">
        <title>Qu·∫£n L√Ω C√¥ng Vi·ªác</title>
        <link rel="stylesheet" href="style.css">
        <!-- API Google cho Sheets (ph√≠a client) -->
        <script src="https://apis.google.com/js/api.js"></script>
        <script>
            // TODO: ƒëi·ªÅn gi√° tr·ªã API c·ªßa b·∫°n
            const GOOGLE_API_KEY = 'AIzaSyAzSlJ6KNuolSKWVqmvwefZRFDsYw6iO3o';
            const GOOGLE_CLIENT_ID = '909540518349-euuig3pibn1npr2njtj8s0d6a9k9nlgd.apps.googleusercontent.com';
            const GOOGLE_SPREADSHEET_ID = '1ZlwzaUEw0ixifnoBjfP206CX3pxDiMMfjMWFJCy6bnU';

            function initGapi() {
                gapi.load('client:auth2', () => {
                    gapi.client.init({
                        apiKey: GOOGLE_API_KEY,
                        clientId: GOOGLE_CLIENT_ID,
                        discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
                        scope: 'https://www.googleapis.com/auth/spreadsheets'
                    });
                });
            }

            function gapiSignIn() {
                const auth = gapi.auth2.getAuthInstance();
                if (!auth.isSignedIn.get()) {
                    return auth.signIn();
                }
                return Promise.resolve();
            }

            // kh·ªüi t·∫°o ngay khi t·∫£i trang
            window.addEventListener('load', initGapi);
        </script>
    </head>
    <body>
        <!-- ========== ƒêƒÇNG NH·∫¨P V√Ä KEYPAD ========== -->
        <!-- Overlay ƒëƒÉng nh·∫≠p: Y√™u c·∫ßu nh·∫≠p 4 ch·ªØ s·ªë PIN tr∆∞·ªõc khi truy c·∫≠p giao di·ªán ch√≠nh -->
        <div id="loginOverlay" class="login-overlay">
            <div class="login-box">
                <h2>Nh·∫≠p M·∫≠t kh·∫©u</h2>
                <div id="pinDots" class="pin-dots">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
                <div class="keypad">
                    <button class="kp" data-key="1">1</button>
                    <button class="kp" data-key="2">2</button>
                    <button class="kp" data-key="3">3</button>
                    <button class="kp" data-key="4">4</button>
                    <button class="kp" data-key="5">5</button>
                    <button class="kp" data-key="6">6</button>
                    <button class="kp" data-key="7">7</button>
                    <button class="kp" data-key="8">8</button>
                    <button class="kp" data-key="9">9</button>
                    <button id="kp-clear" class="kp small">C</button>
                    <button class="kp" data-key="0">0</button>
                    <button id="kp-back" class="kp small">‚å´</button>
                </div>
                <div class="login-footer">
                    <a href="admin.html">Qu·∫£n tr·ªã</a>
                </div>
            </div>
        </div>
        <div id="mainContent" style="display:none">
            <!-- ========== N·ªòI DUNG CH√çNH ========== -->
            <!-- Hi·ªÉn th·ªã sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng -->
            <!-- N√∫t Menu - g√≥c tr√°i tr√™n -->
            <button id="menuToggleBtn" class="menu-toggle-btn">‚ò∞ Menu</button>
            <!-- TH√îNG TIN USER + ƒêƒÇNG XU·∫§T -->
            <div id="userInfo" class="user-info">
                <span id="userName">User</span>
                <button id="logoutBtn" class="btn-logout">üö™ ƒêƒÉng xu·∫•t</button>
            </div>
            <!-- ========== L·ªäch ========== -->
            <!-- Header l·ªãch v√† c√°c n√∫t chuy·ªÉn th√°ng -->
            <div class="calendar-header">
                <button id="prevMonth">‚ùÆ</button>
                <h1 id="monthYear"></h1>
                <button id="nextMonth">‚ùØ</button>
            </div>
            <!-- C√°c ng√†y trong tu·∫ßn (Mon-Sun) -->
            <div class="weekdays">
                <div>Th·ª© hai</div>
                <div>Th·ª© ba</div>
                <div>Th·ª© t∆∞</div>
                <div>Th·ª© nƒÉm</div>
                <div>Th·ª© s√°u</div>
                <div>Th·ª© b·∫£y</div>
                <div>Ch·ªß nh·∫≠t</div>
            </div>
            <!-- Grid l·ªãch - c√°c ng√†y ƒë∆∞·ª£c render b·ªüi JavaScript -->
            <div id="calendar"></div>
            <!-- Ti√™u ƒë·ªÅ ng√†y ƒëang ch·ªçn -->
            <h2 id="selectedDateTitle">Ch·ªçn ng√†y ƒë·ªÉ xem c√¥ng vi·ªác</h2>
            <!-- N√∫t th√™m c√¥ng vi·ªác v√† n√∫t ƒë·ªìng b·ªô v·ªõi Google Sheets -->
            <div style="display: flex; gap: 10px; align-items: center; position: relative;">
                <button id="openAddModal" class="btn-add">‚ûï Th√™m c√¥ng vi·ªác</button>
                <button id="syncSheetBtn" class="btn-add" style="background:#17a2b8;">üîÑ ƒê·ªìng b·ªô Sheet</button>
            </div>
            <!-- Sidebar Menu -->
            <div id="sideMenuPanel" class="side-menu-panel">
                <div class="side-menu-header">
                    <h3>üéØ Th·ª±c hi·ªán</h3>
                    <button id="menuCloseBtn" class="menu-close-btn">&times;</button>
                </div>
                <div class="side-menu-content">
                    <!-- SECTION 1: Qu·∫£n l√Ω ng√†y NB -->
                    <div class="menu-section">
                        <h4 class="menu-section-title">üõ†Ô∏è Qu·∫£n l√Ω ng√†y NB</h4>
                        <button id="selectNbDayBtn" class="btn-check-nb menu-btn">L·ª±a ch·ªçn ng√†y NB</button>
                        <div style="margin-top:12px;">
                            <label class="menu-form-label">Ch·ªçn NB c·∫ßn ch·ªânh:</label>
                            <input type="date" id="manageNbDate" class="menu-form-input">
                        </div>
                        <button id="deleteNbBtn" class="btn-delete" style="width:100%; margin-top:8px;">üóëÔ∏è X√≥a NB</button>
                        <button id="changeNbBtn" class="btn-edit" style="width:100%; margin-top:4px;">üîÑ ƒê·ªïi ng√†y NB</button>
                    </div>
                    <!-- SECTION 1b: Qu·∫£n l√Ω ng√†y NL -->
                    <div class="menu-section">
                        <h4 class="menu-section-title">üõ†Ô∏è Qu·∫£n l√Ω ng√†y NL</h4>
                        <button id="selectNlDayBtn" class="btn-check-nl menu-btn">L·ª±a ch·ªçn ng√†y NL</button>
                        <div style="margin-top:12px;">
                            <label class="menu-form-label">Ch·ªçn NL c·∫ßn ch·ªânh:</label>
                            <input type="date" id="manageNlDate" class="menu-form-input">
                        </div>
                        <button id="deleteNlBtn" class="btn-delete" style="width:100%; margin-top:8px;">üóëÔ∏è X√≥a NL</button>
                        <button id="changeNlBtn" class="btn-edit" style="width:100%; margin-top:4px;">üîÑ ƒê·ªïi ng√†y NL</button>
                    </div>
                    <!-- SECTION 2: Nh√¢n b·∫£n c√¥ng vi·ªác -->
                    <div class="menu-section">
                        <h4 class="menu-section-title">üìÖ Nh√¢n b·∫£n c√¥ng vi·ªác</h4>
                        <button id="duplicateDayBtn" class="btn-duplicate-day menu-btn">Nh√¢n b·∫£n c√¥ng vi·ªác</button>
                    </div>
                    <!-- SECTION 2b: Xu·∫•t c√¥ng vi·ªác -->
                    <div class="menu-section">
                        <h4 class="menu-section-title">üì§ Xu·∫•t c√¥ng vi·ªác</h4>
                        <select id="exportType" class="menu-form-input">
                            <option value="day">Ng√†y</option>
                            <option value="week">Tu·∫ßn</option>
                            <option value="month">Th√°ng</option>
                            <option value="range">Kho·∫£ng</option>
                        </select>
                        <div id="exportWeek" style="margin-top:12px; display:none;">
                            <label class="menu-form-label">Ch·ªçn tu·∫ßn:</label>
                            <select id="exportWeekSelect" class="menu-form-input" style="margin-bottom:10px;"></select>
                        </div>
                        <div id="exportMonth" style="margin-top:12px; display:none;">
                            <label class="menu-form-label">Ch·ªçn th√°ng:</label>
                            <input type="month" id="exportMonthPicker" class="menu-form-input">
                        </div>
                        <div id="exportRange" style="margin-top:12px; display:none;">
                            <label class="menu-form-label">T·ª´ ng√†y:</label>
                            <input
                                type="date"
                                id="exportRangeStart"
                                class="menu-form-input"
                                style="margin-bottom:8px;"
                            >
                            <label class="menu-form-label">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="exportRangeEnd" class="menu-form-input">
                        </div>
                        <button id="exportConfirmBtn" class="btn-add" style="width:100%; margin-top:8px; background:#28a745;">üìÑ Xu·∫•t</button>
                    </div>
                    <!-- SECTION 2c: Nh·∫≠p c√¥ng vi·ªác -->
                    <div class="menu-section">
                        <h4 class="menu-section-title">üì• Nh·∫≠p c√¥ng vi·ªác</h4>
                        <label class="menu-form-label">Lo·∫°i import:</label>
                        <select id="importType" class="menu-form-input" style="margin-bottom:8px;">
                            <option value="auto">T·ª± ƒë·ªông (theo sheet/Ng√†y)</option>
                            <option value="week">Tu·∫ßn</option>
                            <option value="month">Th√°ng</option>
                            <option value="range">Kho·∫£ng</option>
                        </select>
                        <div id="importWeek" style="display:none; margin-bottom:8px;">
                            <label class="menu-form-label">Ch·ªçn tu·∫ßn:</label>
                            <select id="importWeekSelect" class="menu-form-input"></select>
                        </div>
                        <div id="importMonth" style="display:none; margin-bottom:8px;">
                            <label class="menu-form-label">Ch·ªçn th√°ng:</label>
                            <input type="month" id="importMonthPicker" class="menu-form-input">
                        </div>
                        <div id="importRange" style="display:none; margin-bottom:8px;">
                            <label class="menu-form-label">T·ª´ ng√†y:</label>
                            <input
                                type="date"
                                id="importRangeStart"
                                class="menu-form-input"
                                style="margin-bottom:8px;"
                            >
                            <label class="menu-form-label">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="importRangeEnd" class="menu-form-input">
                        </div>
                        <label class="menu-form-label">Ch·ªçn file .xlsx (c·∫•u tr√∫c gi·ªëng file xu·∫•t):</label>
                        <input
                            type="file"
                            id="importFile"
                            accept=".xlsx"
                            class="menu-form-input"
                            style="margin-bottom:8px;"
                        >
                        <div style="display:flex; gap:8px;">
                            <button id="importConfirmBtn" class="btn-add" style="flex:1; background:#007bff;">üì• Nh·∫≠p</button>
                            <button id="importPreviewBtn" class="btn-edit" style="flex:1; background:#6c757d;">üîé Xem tr∆∞·ªõc</button>
                        </div>
                        <small style="display:block; margin-top:8px; color:#666;">
                            H·ªó tr·ª£ file nhi·ªÅu sheet (m·ªói sheet l√† 1 ng√†y, sheet name c√≥ th·ªÉ ch·ªâ ch·ª©a s·ªë ng√†y) ho·∫∑c 1 sheet c√≥ c·ªôt "Ng√†y" (gi·ªù c√≥ th·ªÉ ch·ªâ c√≥ s·ªë ng√†y). V·ªõi
                            <strong>Tu·∫ßn/Th√°ng</strong>
                            , n·∫øu file kh√¥ng ch·ª©a c·ªôt "Ng√†y" th√¨ c√°c h√†ng s·∫Ω ƒë∆∞·ª£c g√°n ng√†y b·∫Øt ƒë·∫ßu t∆∞∆°ng ·ª©ng.
                        </small>
                    </div>
                    <!-- SECTION 3: X√≥a c√¥ng vi·ªác -->
                    <div class="menu-section">
                        <h4 class="menu-section-title">üóëÔ∏è X√≥a c√¥ng vi·ªác</h4>
                        <select id="deleteSelectMain" class="menu-form-input">
                            <option value="">Ch·ªçn lo·∫°i x√≥a...</option>
                            <option value="day">X√≥a ng√†y</option>
                            <option value="week">X√≥a tu·∫ßn</option>
                            <option value="month">X√≥a th√°ng</option>
                        </select>
                        <!-- X√≥a ng√†y -->
                        <div id="deleteDay" style="margin-top: 12px; display: none;">
                            <button id="deleteDayBtn" class="btn-add" style="width: 100%; padding: 10px; background: #dc3545; color: white; cursor: pointer; border: none; border-radius: 6px; font-weight: 600;">üóëÔ∏è X√≥a ng√†y</button>
                        </div>
                        <!-- X√≥a tu·∫ßn -->
                        <div id="deleteWeek" style="margin-top: 12px; display: none;">
                            <label class="menu-form-label">Ch·ªçn tu·∫ßn:</label>
                            <select id="weekSelect" class="menu-form-input" style="margin-bottom: 10px;"></select>
                            <button id="deleteWeekBtn" class="btn-add" style="width: 100%; padding: 10px; background: #dc3545; color: white; cursor: pointer; border: none; border-radius: 6px; font-weight: 600;">üóëÔ∏è X√≥a tu·∫ßn</button>
                        </div>
                        <!-- X√≥a th√°ng -->
                        <div id="deleteMonth" style="margin-top: 12px; display: none;">
                            <label class="menu-form-label">Ch·ªçn th√°ng:</label>
                            <input
                                type="month"
                                id="monthPicker"
                                class="menu-form-input"
                                style="margin-bottom: 10px;"
                            >
                            <button id="deleteMonthBtn" class="btn-add" style="width: 100%; padding: 10px; background: #dc3545; color: white; cursor: pointer; border: none; border-radius: 6px; font-weight: 600;">üóëÔ∏è X√≥a th√°ng</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ========== B·∫¢NG C√îNG VI·ªÜC ========== -->
            <!-- Hi·ªÉn th·ªã danh s√°ch c√¥ng vi·ªác c·ªßa ng√†y ƒë∆∞·ª£c ch·ªçn -->
            <table>
                <thead>
                    <tr>
                        <!-- C·ªôt ch·ªçn, ch·ªó ƒë·ªÉ dropdown x√≥a v√† checkbox ch·ªçn t·∫•t c·∫£ -->
                        <th style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                            <select id="deleteSelect" style="padding:2px 4px; width:auto; font-size:12px; height:20px;">
                                <option value="">X√≥a...</option>
                                <option value="selected">X√≥a ƒë√£ ch·ªçn</option>
                            </select>
                            <input type="checkbox" id="selectAllCheckbox">
                        </th>
                        <th>STT</th>
                        <th>N·ªôi dung</th>
                        <th>ƒê∆°n v·ªã</th>
                        <th>Th·ªùi gian</th>
                        <th>M·ª©c ƒë·ªô</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Ghi ch√∫</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <!-- C√πng c·∫•p render b·ªüi JavaScript -->
                <tbody id="taskTable"></tbody>
            </table>
            <!-- ========== MODAL ========== -->
            <!-- Modal l·ª±a ch·ªçn ng√†y NB -->
            <div id="nbSelectModal" class="modal">
                <div class="modal-content nb-modal-content">
                    <span class="close" id="closeNbSelectModal">&times;</span>
                    <h2 style="margin-top: 0; color: #333; text-align: center; font-size: 22px; margin-bottom: 20px;">üè∑Ô∏è L·ª±a ch·ªçn ng√†y Ngh·ªâ B√π (NB)</h2>
                    <!-- Section ch·ªçn NƒÉm/Th√°ng -->
                    <div id="monthSelectSection" style="margin-bottom: 20px;">
                        <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                            <div style="flex: 1;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Ch·ªçn NƒÉm:</label>
                                <select id="nbYearSelect" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;"></select>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px;" id="nbMonthList"></div>
                    </div>
                    <!-- Section l·ªãch (·∫©n ban ƒë·∫ßu) -->
                    <div id="calendarSelectSection" style="display: none; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <button id="nbCalendarBack" style="padding: 8px 14px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">‚Üê Quay l·∫°i</button>
                            <h3 id="nbCalendarTitle" style="margin: 0; font-size: 18px; color: #333;"></h3>
                            <div style="width: 100px;"></div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 10px; text-align: center; font-weight: 600; color: #555; font-size: 13px;">
                            <div style="padding: 8px 0;">Th·ª© hai</div>
                            <div style="padding: 8px 0;">Th·ª© ba</div>
                            <div style="padding: 8px 0;">Th·ª© t∆∞</div>
                            <div style="padding: 8px 0;">Th·ª© nƒÉm</div>
                            <div style="padding: 8px 0;">Th·ª© s√°u</div>
                            <div style="padding: 8px 0;">Th·ª© b·∫£y</div>
                            <div style="padding: 8px 0;">Ch·ªß nh·∫≠t</div>
                        </div>
                        <div id="nbCalendarDays" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 15px;"></div>
                        <!-- Danh s√°ch ng√†y ƒë∆∞·ª£c ch·ªçn -->
                        <div id="nbSelectedDatesContainer" style="margin-bottom: 15px; padding: 12px; background: #f0f7ff; border-radius: 6px; border: 1px solid #b3d9ff;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 8px; font-size: 14px;">Ng√†y ƒë∆∞·ª£c ch·ªçn:</div>
                            <div id="nbSelectedDatesList" style="display: flex; flex-wrap: wrap; gap: 6px;"></div>
                            <div id="nbNoDatesMsg" style="color: #999; font-size: 14px;">Ch∆∞a ch·ªçn ng√†y n√†o</div>
                        </div>
                        <button id="nbConfirmButton" style="width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 16px;">‚úîÔ∏è X√°c nh·∫≠n</button>
                    </div>
                </div>
            </div>
            <!-- Modal l·ª±a ch·ªçn ng√†y NL -->
            <div id="nlSelectModal" class="modal">
                <div class="modal-content nl-modal-content">
                    <span class="close" id="closeNlSelectModal">&times;</span>
                    <h2 style="margin-top: 0; color: #333; text-align: center; font-size: 22px; margin-bottom: 20px;">üèñÔ∏è L·ª±a ch·ªçn ng√†y Ngh·ªâ L·ªÖ (NL)</h2>
                    <!-- Section ch·ªçn NƒÉm/Th√°ng -->
                    <div id="nlMonthSelectSection" style="margin-bottom: 20px;">
                        <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                            <div style="flex: 1;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Ch·ªçn NƒÉm:</label>
                                <select id="nlYearSelect" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;"></select>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px;" id="nlMonthList"></div>
                    </div>
                    <!-- Section l·ªãch (·∫©n ban ƒë·∫ßu) -->
                    <div id="nlCalendarSelectSection" style="display: none; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <button id="nlCalendarBack" style="padding: 8px 14px; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">‚Üê Quay l·∫°i</button>
                            <h3 id="nlCalendarTitle" style="margin: 0; font-size: 18px; color: #333;"></h3>
                            <div style="width: 100px;"></div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 10px; text-align: center; font-weight: 600; color: #555; font-size: 13px;">
                            <div style="padding: 8px 0;">Th·ª© hai</div>
                            <div style="padding: 8px 0;">Th·ª© ba</div>
                            <div style="padding: 8px 0;">Th·ª© t∆∞</div>
                            <div style="padding: 8px 0;">Th·ª© nƒÉm</div>
                            <div style="padding: 8px 0;">Th·ª© s√°u</div>
                            <div style="padding: 8px 0;">Th·ª© b·∫£y</div>
                            <div style="padding: 8px 0;">Ch·ªß nh·∫≠t</div>
                        </div>
                        <div id="nlCalendarDays" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 15px;"></div>
                        <!-- Danh s√°ch ng√†y ƒë∆∞·ª£c ch·ªçn -->
                        <div id="nlSelectedDatesContainer" style="margin-bottom: 15px; padding: 12px; background: #fff0f6; border-radius: 6px; border: 1px solid #ffccd5;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 8px; font-size: 14px;">Ng√†y ƒë∆∞·ª£c ch·ªçn:</div>
                            <div id="nlSelectedDatesList" style="display: flex; flex-wrap: wrap; gap: 6px;"></div>
                            <div id="nlNoDatesMsg" style="color: #999; font-size: 14px;">Ch∆∞a ch·ªçn ng√†y n√†o</div>
                        </div>
                        <button id="nlConfirmButton" style="width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 16px;">‚úîÔ∏è X√°c nh·∫≠n</button>
                    </div>
                </div>
            </div>
            <!-- Modal th√™m / s·ª≠a c√¥ng vi·ªác -->
            <div id="taskModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2 id="modalTitle">Th√™m c√¥ng vi·ªác</h2>
                    <input type="hidden" id="taskId">
                    <label>N·ªôi dung c√¥ng vi·ªác</label>
                    <textarea id="content"></textarea>
                    <label>ƒê∆°n v·ªã th·ª±c hi·ªán</label>
                    <input type="text" id="unit">
                    <label>Th·ªùi gian ho√†n th√†nh</label>
                    <input type="text" id="duration">
                    <label>M·ª©c ƒë·ªô</label>
                    <select id="priority">
                        <option>Th·∫•p</option>
                        <option>Trung b√¨nh</option>
                        <option>Cao</option>
                    </select>
                    <label>Tr·∫°ng th√°i</label>
                    <select id="status">
                        <option>Ch∆∞a x·ª≠ l√Ω</option>
                        <option>ƒêang x·ª≠ l√Ω</option>
                        <option>ƒê√£ x·ª≠ l√Ω</option>
                    </select>
                    <label>Ghi ch√∫</label>
                    <textarea id="note"></textarea>
                    <button id="saveTaskBtn" class="btn-add">üíæ L∆∞u c√¥ng vi·ªác</button>
                </div>
            </div>
            <!-- Modal nh√¢n b·∫£n n√¢ng cao -->
            <div id="advancedDuplicateModal" class="modal">
                <div class="modal-content" style="max-width:500px">
                    <span class="close" id="closeAdvancedDuplicate">&times;</span>
                    <h3>Nh√¢n b·∫£n c√¥ng vi·ªác</h3>
                    <label>Ch·ªçn ki·ªÉu nh√¢n b·∫£n</label>
                    <select id="duplicateType">
                        <option value="multi">Nh√¢n b·∫£n sang nhi·ªÅu ng√†y</option>
                        <option value="week">Nh√¢n b·∫£n c·∫£ tu·∫ßn</option>
                        <option value="month">Nh√¢n b·∫£n c·∫£ th√°ng</option>
                    </select>
                    <!-- B·ªô ph·∫≠n nh√¢n b·∫£n n√¢ng cao - multiple dates -->
                    <div id="multiDateBox" style="margin-top:15px; display:block;">
                        <label>
                            <strong>Nh√¢n b·∫£n sang c√°c ng√†y</strong>
                        </label>
                        <input type="date" id="multiDatePicker" style="margin-right:5px;">
                        <button id="addDateBtn" style="padding:5px 10px;">‚ûï Th√™m ng√†y</button>
                        <ul id="dateList" style="margin-top:10px;"></ul>
                    </div>
                    <!-- B·ªô ph·∫≠n nh√¢n b·∫£n n√¢ng cao - week -->
                    <div id="weekBox" style="margin-top:15px; display:none;">
                        <label>
                            <strong>Ch·ªçn tu·∫ßn ƒë√≠ch ƒë·ªÉ nh√¢n b·∫£n</strong>
                        </label>
                        <select id="targetWeekSelect" style="width:100%; padding:8px; margin-top:10px;">
                            <option value="">-- Ch·ªçn tu·∫ßn --</option>
                        </select>
                    </div>
                    <!-- B·ªô ph·∫≠n nh√¢n b·∫£n n√¢ng cao - month -->
                    <div id="monthBox" style="margin-top:15px; display:none;">
                        <label>
                            <strong>Ch·ªçn th√°ng ƒë√≠ch ƒë·ªÉ nh√¢n b·∫£n</strong>
                        </label>
                        <input type="month" id="targetMonthPicker" style="width:100%; padding:8px; margin-top:10px;">
                    </div>
                    <button id="confirmAdvancedDuplicate" class="btn-add" style="margin-top:15px; width:100%;">
                        üîÅ X√°c nh·∫≠n nh√¢n b·∫£n
                    </button>
                </div>
            </div>
            <!-- V√≤ng xoay loading -->
            <div id="loadingIndicator" class="loading-overlay">
                <div class="loading-spinner"></div>
            </div>
            <!-- Modal th√¥ng b√°o / x√°c nh·∫≠n t√πy ch·ªânh -->
            <div id="customAlertModal" class="modal" style="display:none;">
                <div class="modal-content" id="customAlertContent" style="max-width:480px">
                    <div id="customAlertBody" style="padding:12px 6px; font-size:15px; color:#222"></div>
                    <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
                        <button id="customAlertCancel" class="btn-edit" style="display:none;">Cancel</button>
                        <button id="customAlertOk" class="btn-add">OK</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- ========== SCRIPT ========== -->
        <!-- Firebase Realtime Database -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
        <script type="module" src="firebase.js"></script>
        <!-- Logic ch√≠nh c·ªßa ·ª©ng d·ª•ng -->
        <script type="module" src="script.js"></script>
    </body>
</html>
