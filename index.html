<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8">
        <title>Qu·∫£n L√Ω C√¥ng Vi·ªác</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <!-- ========== ƒêƒÇNG NH·∫¨P V√Ä KEYPAD ========== -->
        <!-- Overlay ƒëƒÉng nh·∫≠p: Y√™u c·∫ßu nh·∫≠p 4 ch·ªØ s·ªë PIN tr∆∞·ªõc khi truy c·∫≠p giao di·ªán ch√≠nh -->
        <div id="loginOverlay" class="login-overlay">
            <div class="login-box">
                <h2>Nh·∫≠p M·∫≠t kh·∫©u</h2>
                <div id="pinDots" class="pin-dots">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
                <div class="keypad">
                    <button class="kp" data-key="1">1</button>
                    <button class="kp" data-key="2">2</button>
                    <button class="kp" data-key="3">3</button>
                    <button class="kp" data-key="4">4</button>
                    <button class="kp" data-key="5">5</button>
                    <button class="kp" data-key="6">6</button>
                    <button class="kp" data-key="7">7</button>
                    <button class="kp" data-key="8">8</button>
                    <button class="kp" data-key="9">9</button>
                    <button id="kp-clear" class="kp small">C</button>
                    <button class="kp" data-key="0">0</button>
                    <button id="kp-back" class="kp small">‚å´</button>
                </div>
                <div class="login-footer">
                    <a href="admin.html">Qu·∫£n tr·ªã</a>
                </div>
            </div>
        </div>
        <div id="mainContent" style="display:none">
            <!-- ========== N·ªòI DUNG CH√çNH ========== -->
            <!-- Hi·ªÉn th·ªã sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng -->
            <!-- TH√îNG TIN USER + ƒêƒÇNG XU·∫§T -->
            <div id="userInfo" class="user-info">
                <span id="userName">User</span>
                <button id="logoutBtn" class="btn-logout">üö™ ƒêƒÉng xu·∫•t</button>
            </div>
            <!-- ========== L·ªäch ========== -->
            <!-- Header l·ªãch v√† c√°c n√∫t chuy·ªÉn th√°ng -->
            <div class="calendar-header">
                <button id="prevMonth">‚ùÆ</button>
                <h1 id="monthYear"></h1>
                <button id="nextMonth">‚ùØ</button>
            </div>
            <!-- C√°c ng√†y trong tu·∫ßn (Mon-Sun) -->
            <div class="weekdays">
                <div>Th·ª© hai</div>
                <div>Th·ª© ba</div>
                <div>Th·ª© t∆∞</div>
                <div>Th·ª© nƒÉm</div>
                <div>Th·ª© s√°u</div>
                <div>Th·ª© b·∫£y</div>
                <div>Ch·ªß nh·∫≠t</div>
            </div>
            <!-- Grid l·ªãch - c√°c ng√†y ƒë∆∞·ª£c render b·ªüi JavaScript -->
            <div id="calendar"></div>
            <!-- Ti√™u ƒë·ªÅ ng√†y ƒëang ch·ªçn -->
            <h2 id="selectedDateTitle">Ch·ªçn ng√†y ƒë·ªÉ xem c√¥ng vi·ªác</h2>
            <!-- ========== N√öT H√ÄNH ƒê·ªòNG ========== -->
            <!-- N√∫t th√™m c√¥ng vi·ªác -->
            <button id="openAddModal" class="btn-add">‚ûï Th√™m c√¥ng vi·ªác</button>
            <!-- N√∫t nh√¢n b·∫£n c√¥ng vi·ªác -->
            <button id="duplicateDayBtn" class="btn-duplicate-day">üìÖ Nh√¢n b·∫£n c√¥ng vi·ªác</button>
            <!-- ========== DROPDOWN X√ìA ========== -->
            <!-- Dropdown th·ª© c·∫•p ch√≠nh: x√≥a ng√†y / tu·∫ßn / th√°ng -->
            <select id="deleteSelectMain" style="padding:8px; margin-left:8px; margin-right:8px;">
                <option value="">üóëÔ∏è X√≥a...</option>
                <option value="day">X√≥a ng√†y</option>
                <option value="week">X√≥a tu·∫ßn</option>
                <option value="month">X√≥a th√°ng</option>
            </select>
            <!-- Dropdown ch·ªçn tu·∫ßn -->
            <label style="margin-left:8px">Ch·ªçn tu·∫ßn:</label>
            <select id="weekSelect" style="margin-right:8px"></select>
            <!-- Input ch·ªçn th√°ng -->
            <label style="margin-left:8px">Ch·ªçn th√°ng:</label>
            <input type="month" id="monthPicker" style="margin-right:8px">
            <!-- ========== B·∫¢NG C√îNG VI·ªÜC ========== -->
            <!-- Hi·ªÉn th·ªã danh s√°ch c√¥ng vi·ªác c·ªßa ng√†y ƒë∆∞·ª£c ch·ªçn -->
            <table>
                <thead>
                    <tr>
                        <!-- C·ªôt ch·ªçn, ch·ªó ƒë·ªÉ dropdown x√≥a v√† checkbox ch·ªçn t·∫•t c·∫£ -->
                        <th style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                            <select id="deleteSelect" style="padding:2px 4px; width:auto; font-size:12px; height:20px;">
                                <option value="">X√≥a...</option>
                                <option value="selected">X√≥a ƒë√£ ch·ªçn</option>
                            </select>
                            <input type="checkbox" id="selectAllCheckbox">
                        </th>
                        <th>STT</th>
                        <th>N·ªôi dung</th>
                        <th>ƒê∆°n v·ªã</th>
                        <th>Th·ªùi gian</th>
                        <th>M·ª©c ƒë·ªô</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Ghi ch√∫</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <!-- C√πng c·∫•p render b·ªüi JavaScript -->
                <tbody id="taskTable"></tbody>
            </table>
            <!-- ========== MODAL ========== -->
            <!-- Modal th√™m / s·ª≠a c√¥ng vi·ªác -->
            <div id="taskModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2 id="modalTitle">Th√™m c√¥ng vi·ªác</h2>
                    <input type="hidden" id="taskId">
                    <label>N·ªôi dung c√¥ng vi·ªác</label>
                    <textarea id="content"></textarea>
                    <label>ƒê∆°n v·ªã th·ª±c hi·ªán</label>
                    <input type="text" id="unit">
                    <label>Th·ªùi gian ho√†n th√†nh</label>
                    <input type="text" id="duration">
                    <label>M·ª©c ƒë·ªô</label>
                    <select id="priority">
                        <option>Th·∫•p</option>
                        <option>Trung b√¨nh</option>
                        <option>Cao</option>
                    </select>
                    <label>Tr·∫°ng th√°i</label>
                    <select id="status">
                        <option>Ch∆∞a x·ª≠ l√Ω</option>
                        <option>ƒêang x·ª≠ l√Ω</option>
                        <option>ƒê√£ x·ª≠ l√Ω</option>
                    </select>
                    <label>Ghi ch√∫</label>
                    <textarea id="note"></textarea>
                    <button id="saveTaskBtn" class="btn-add">üíæ L∆∞u c√¥ng vi·ªác</button>
                </div>
            </div>
            <!-- Modal nh√¢n b·∫£n n√¢ng cao -->
            <div id="advancedDuplicateModal" class="modal">
                <div class="modal-content" style="max-width:500px">
                    <span class="close" id="closeAdvancedDuplicate">&times;</span>
                    <h3>Nh√¢n b·∫£n c√¥ng vi·ªác</h3>
                    <label>Ch·ªçn ki·ªÉu nh√¢n b·∫£n</label>
                    <select id="duplicateType">
                        <option value="multi">Nh√¢n b·∫£n sang nhi·ªÅu ng√†y</option>
                        <option value="week">Nh√¢n b·∫£n c·∫£ tu·∫ßn</option>
                        <option value="month">Nh√¢n b·∫£n c·∫£ th√°ng</option>
                    </select>
                    <!-- B·ªô ph·∫≠n nh√¢n b·∫£n n√¢ng cao - multiple dates -->
                    <div id="multiDateBox" style="margin-top:15px; display:block;">
                        <label>
                            <strong>Nh√¢n b·∫£n sang c√°c ng√†y</strong>
                        </label>
                        <input type="date" id="multiDatePicker" style="margin-right:5px;">
                        <button id="addDateBtn" style="padding:5px 10px;">‚ûï Th√™m ng√†y</button>
                        <ul id="dateList" style="margin-top:10px;"></ul>
                    </div>
                    <!-- B·ªô ph·∫≠n nh√¢n b·∫£n n√¢ng cao - week -->
                    <div id="weekBox" style="margin-top:15px; display:none;">
                        <label>
                            <strong>Ch·ªçn tu·∫ßn ƒë√≠ch ƒë·ªÉ nh√¢n b·∫£n</strong>
                        </label>
                        <select id="targetWeekSelect" style="width:100%; padding:8px; margin-top:10px;">
                            <option value="">-- Ch·ªçn tu·∫ßn --</option>
                        </select>
                    </div>
                    <!-- B·ªô ph·∫≠n nh√¢n b·∫£n n√¢ng cao - month -->
                    <div id="monthBox" style="margin-top:15px; display:none;">
                        <label>
                            <strong>Ch·ªçn th√°ng ƒë√≠ch ƒë·ªÉ nh√¢n b·∫£n</strong>
                        </label>
                        <input type="month" id="targetMonthPicker" style="width:100%; padding:8px; margin-top:10px;">
                    </div>
                    <button id="confirmAdvancedDuplicate" class="btn-add" style="margin-top:15px; width:100%;">
                        üîÅ X√°c nh·∫≠n nh√¢n b·∫£n
                    </button>
                </div>
            </div>
            <!-- V√≤ng xoay loading -->
            <div id="loadingIndicator" class="loading-overlay">
                <div class="loading-spinner"></div>
            </div>
            <!-- Modal th√¥ng b√°o / x√°c nh·∫≠n t√πy ch·ªânh -->
            <div id="customAlertModal" class="modal" style="display:none;">
                <div class="modal-content" id="customAlertContent" style="max-width:480px">
                    <div id="customAlertBody" style="padding:12px 6px; font-size:15px; color:#222"></div>
                    <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
                        <button id="customAlertCancel" class="btn-edit" style="display:none;">Cancel</button>
                        <button id="customAlertOk" class="btn-add">OK</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- ========== SCRIPT ========== -->
        <!-- Firebase Realtime Database -->
        <script type="module" src="firebase.js"></script>
        <!-- Logic ch√≠nh c·ªßa ·ª©ng d·ª•ng -->
        <script type="module" src="script.js"></script>
    </body>
</html>
